# Enum 定義（共通値）

本プロジェクトでは、設定値の揺れや不正値混入を防ぐため、
**取りうる値が有限な項目はすべて enum（値集合）として定義する**。

- 実装は **Zod の `z.enum([...])`**
- JSON / TypeScript の実値は **string**
- UI 表示名（日本語ラベル）は enum に含めない（UI 層で対応）

これにより、

- API / Bot / 将来の WebUI 間で値が完全に一致する
- 永続化（JSON / DB）時に不正値を防止できる
- DB 移行時に enum / check 制約へ移行しやすい

---

## 1. 名前読み関連

### 1.1 名前の取得元（`nameRead.nameSource`）

| 値         | 意味                 |
| ---------- | -------------------- |
| `NICKNAME` | サーバーニックネーム |
| `USERNAME` | Discord ユーザー名   |

### 1.2 名前の再読み上げルール（`nameRead.repeatMode`）

| 値          | 意味                     |
| ----------- | ------------------------ |
| `ALWAYS`    | 毎回名前を読む           |
| `ON_CHANGE` | 話者が変わった時のみ読む |
| `COOLDOWN`  | クールダウン後に再度読む |

※ `cooldownSec = 0` の場合は毎回読む。

### 1.3 ユーザーごとの正規化指定（`GuildMemberSettings.nameRead.normalize`）

| 値        | 意味                 |
| --------- | -------------------- |
| `inherit` | GuildSettings に従う |
| `on`      | 正規化する           |
| `off`     | 正規化しない         |

---

## 2. フィルタ関連（`filters.*`）

### 2.1 メンションの読み上げ方（`filters.mentionMode`）

| 値            | 意味                               |
| ------------- | ---------------------------------- |
| `EXPAND`      | `@user` をユーザー名に展開して読む |
| `IGNORE`      | 読まない                           |
| `SAY_MENTION` | 「メンション」と読む               |

### 2.2 URL の読み上げ方（`filters.urlMode`）

| 値            | 意味             |
| ------------- | ---------------- |
| `DOMAIN_ONLY` | ドメインのみ読む |
| `FULL`        | フルURLを読む    |
| `IGNORE`      | 読まない         |

### 2.3 絵文字の扱い（`filters.emojiMode`）

| 値       | 意味           |
| -------- | -------------- |
| `IGNORE` | 読まない       |
| `NAME`   | 絵文字名を読む |

### 2.4 コードブロックの扱い（`filters.codeBlockMode`）

| 値         | 意味                       |
| ---------- | -------------------------- |
| `SAY_CODE` | 「コードがあります」と読む |
| `IGNORE`   | 無視する                   |

※ 実際のコード内容は読み上げない。

### 2.5 添付ファイルの扱い（`filters.attachmentMode`）

| 値          | 意味                                 |
| ----------- | ------------------------------------ |
| `TYPE_ONLY` | 「画像」「ファイル」など種類のみ読む |
| `IGNORE`    | 読まない                             |

### 2.6 改行の扱い（`filters.newlineMode`）

| 値      | 意味             |
| ------- | ---------------- |
| `JOIN`  | 連結して読む     |
| `PAUSE` | 区切りとして扱う |

---

## 3. 制限・権限関連

### 3.1 文字数超過時の挙動（`limits.overLimitAction`）

| 値             | 意味             |
| -------------- | ---------------- |
| `SAY_IKARYAKU` | 「以下略」と読む |
| `IGNORE`       | 読まない         |

### 3.2 設定変更権限（`permissions.manageMode`）

| 値           | 意味       |
| ------------ | ---------- |
| `ADMIN_ONLY` | 管理者のみ |
| `ROLE_BASED` | 指定ロール |

---

## 4. 音声エンジン（フェーズ1）

### 4.1 音声エンジン（`voice.engine`）

| 値         | 意味                      |
| ---------- | ------------------------- |
| `voicevox` | VOICEVOX（フェーズ1固定） |

※ フェーズ1では `GuildSettings` のみで指定可能。
※ `GuildMemberSettings` では上書き不可。

---

## 5. 運用通知設定の最小ログレベル（`opsNotify.levelMin`）

| 値        | 意味                                     |
| --------- | ---------------------------------------- |
| `INFO`    | 参考情報（起動完了など）                 |
| `NOTICE`  | 運用上把握すべき変化（再起動・更新など） |
| `WARNING` | 問題発生・対応が必要な状態               |

---

## 6. 補足ルール（重要）

- enum 値は **増やすことは可能**だが、**削除・変更は破壊的変更**
- 新しい値を追加する場合は、必ず：
  1. ドキュメント更新
  2. Zod enum 追加
  3. デフォルト値の妥当性確認
     を行う
